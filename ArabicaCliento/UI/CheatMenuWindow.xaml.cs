using ArabicaCliento.Systems;
using ArabicaCliento.UI.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.XAML;

namespace ArabicaCliento.UI;

[GenerateTypedNameReferences]
public sealed partial class CheatMenuWindow : ArabicaWindow
{
    [Dependency] private readonly IEntityManager _entMan = default!;
    
    private readonly ArabicaDiscordSystem? _arabicaDiscord;

    public CheatMenuWindow()
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);
        _arabicaDiscord ??= _entMan.System<ArabicaDiscordSystem>();
        TitleLabel.Text = "ArabicaCliento: Click GUI";
        Ranged.Pressed = ArabicaConfig.RangedAimbotEnabled;
        Melee.Pressed = ArabicaConfig.MeleeAimbotEnabled;
        AutoSpin.Pressed = ArabicaConfig.SpinBotEnabled;
        AntiSlip.Pressed = ArabicaConfig.AntiSlipEnabled;
        SyndicateDetector.Pressed = ArabicaConfig.SyndicateDetector;
        DOD.Pressed = ArabicaConfig.FOVDisable;
        OverlaysDisable.Pressed = ArabicaConfig.OverlaysDisable;
        AdmOverlays.Pressed = ArabicaConfig.OverlayEnabled;
        //LogPlayers.Pressed = ArabicaConfig.LogPlayers;

        Melee.OnToggled += args => ArabicaConfig.MeleeAimbotEnabled = args.Pressed;
        Ranged.OnToggled += args => ArabicaConfig.RangedAimbotEnabled = args.Pressed;
        AutoSpin.OnToggled += args => ArabicaConfig.SpinBotEnabled = args.Pressed;
        AntiSlip.OnToggled += args => ArabicaConfig.AntiSlipEnabled = args.Pressed;
        SyndicateDetector.OnToggled += args => ArabicaConfig.SyndicateDetector = args.Pressed;
        DOD.OnToggled += args => ArabicaConfig.FOVDisable = args.Pressed;
        OverlaysDisable.OnToggled += args => ArabicaConfig.OverlaysDisable = args.Pressed;
        AdmOverlays.OnToggled += args => ArabicaConfig.OverlayEnabled = args.Pressed;

        
        Discord.OnPressed += _ => _arabicaDiscord?.OpenDiscord();
        //LogPlayers.OnToggled += args => ArabicaConfig.LogPlayers = args.Pressed;
    }
}